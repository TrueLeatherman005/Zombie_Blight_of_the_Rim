# Zombie Blight - Полная документация систем (25.04.2025)

## 1. Система заражения (Infection System)

### Hediff_BlightInfection
- Прогрессирующая инфекция с несколькими стадиями
- Базовая скорость прогрессии: +0.3 в день  а должна быть 0.5
- Модификаторы прогрессии:
  * Температура (быстрее при 15-25°C)   не было такого никогда. связь с температурой есть только для трупов с заражением, и без оптимума, есть только недопустымие и замедляющие температуры, зависит от того какая температура воздействует на труп относитель статов минимальной и максимальной комфортной температуры
  * Контакт со слизью (+50% к скорости) в основном для трупов применимо. а живые могут получать доп тяжесть от атак зомби, ведь если зараза уже в теле то новые заразные атаки ее должны повышать
  * Иммунитет/сопротивление (замедляет)
- При достижении 100% тяжести:
  * Живые: смерть и превращение    не должны они умирать, что за трата времени, они должны сращу превращаться
  * Мертвые: прямое превращение

### Системы сопротивления
1. Hediff_BlightResistance:
   - Длительность: 12 часов
   - Снижает получаемый урон от инфекции на 70%   какой еще урон?
   - Замедляет прогрессию на 50%        

2. Hediff_BlightImmunity:
   - Длительность: 36 часов
   - Полный иммунитет к новым заражениям
   - При получении вылечивает существующую инфекцию нет, не вылечивает, поставить иммунизацию 100% это не вылечивание, просто тяжесть начнет спадать и не сможет расти естетвенным путем

## 2. Система зомби (Zombie System)

### Hediff_BlightZombieState
- Основные характеристики:
  * 5 уровней эволюции (severity 1.0-5.0)  эта часть не является фактически правдой. так как уровней еще нету, и каждый уровень это отдельный хедиф а не один и тот же
  * Автоматическая регенерация (интервал зависит от уровня)  уровней не существует в данный момент.
  * Система голода через Hediff_BlightStarvation
  * Блокировка дальних атак     *возможности использовать дальние атаки.
  * Активация соседних зомби при обнаружении цели 

### Hediff_BlightStarvation (Система голода)
- Активируется при нулевом уровне еды
- Эффекты по стадиям:
  1. Замедление регенерации
  2. Снижение эффективности заражения
  3. Оглушение/гибернация     какое еще оглушение?
  4. Саморазрушение

## 3. Система лечения (Treatment System)

### Сыворотки:
1. BlightCleanseSerum_Herbal:
   - +10% к иммунитету
   - Макс. эффективность 50%
   - Создается из BlightCells + травяной медицины

2. BlightCleanseSerum_Industrial:
   - +30% к иммунитету
   - Макс. эффективность 90%
   - Требует промышленную медицину

3. BlightCleanseSerum_Glitter:
   - Мгновенный иммунитет 100%
   - Снижает тяжесть на 50%
   - Дает временный полный иммунитет
   - Требует продвинутую медицину

## 4. Система запахов (Scent System)

### 1. ScentsMapComponent (Компонент карты для хранения запахов)
- Хранит словарь запахов для каждой клетки карты
- Каждый запах содержит:
  * Силу (strength)
  * Время последнего обновления (lastUpdatedTick)
  * Флаг источника (sourceWasInfected)
- Обновляется каждые 250 тиков
- Затухание: примерно 12% в час

### 2. Comp_ScentMarker (Компонент для оставления следов)
- Добавляется всем живым существам
- Оставляет запах каждые 60 тиков
- При кровотечении сила запаха удваивается
- Не оставляет следы если существо уже заражено

### 3. JobGiver_BlightTraceFollower (Логика следования по запаху)
- Радиус поиска: 12 клеток
- Минимальный порог силы запаха: 0.1
- Проблема текущей реализации: ищет просто ближайший запах, а не самый сильный в радиусе 5 клеток
  Нужно изменить на поиск самого сильного запаха в радиусе 5 клеток для лучшего следования по свежим следам

### 4. JobGiver_BlightZombieBehavior (Базовое поведение)
- Случайное брождение в радиусе 15 клеток
- Активируется только когда нет доступных запахов

## Приоритеты поведения зомби (от высшего к низшему):
1. Экстренные реакции (вставание)   вставание куда? от чего?
2. Бой с ближайшими врагами
3. Следование по запаху
4. Случайное брождение

## Примеры взаимодействий:

1. Оставление следов:
```
Колонист А идет → каждые 60 тиков в его клетке появляется запах силой 1.0
Колонист А ранен и кровоточит → запах усиливается до 2.0
```

2. Выслеживание:
```
Зомби замечает запах в радиусе 12 клеток
Сейчас: идет к ближайшему запаху силой > 0.1
Нужно изменить: должен искать самый сильный запах в радиусе 5 клеток
```

3. Затухание запаха:
```
Сила запаха: 1.0
Через час: 0.88
Через два часа: 0.77
Удаляется при силе < 0.1
```

## 5. Система ресурсов (Resource System)

### Добываемые ресурсы:
1. Item_BlightSlimePack:
   - Добывается с трупов зараженных
   - Используется для крафта сывороток
   - Высоко заразен при контакте

2. Item_BlightCells:
   - Очищенная версия слизи
   - Основной компонент для исследований
   - Требуется для всех сывороток

## 6. Исследования (Research)

### Основные ветки:
1. BlightStudies:
   - Базовое изучение вируса
   - Открывает добычу ресурсов

2. BlightTreatmentBasic/Advanced/Glitterworld:  базовый уровень встроен в BlightStudies
   - Разработка сывороток разных уровней
   - Каждый уровень требует предыдущий

3. BlightWeaponryBasic/Advanced:  на данный момент не должно существовать разных уровней.
   - Разработка оружия против зомби   никогда такого не было и не планируется
   - Использование вируса в военных целях

## Текущие задачи:
1. Доработка JobGiver_BlightTraceFollower
2. Добавление дебаг-визуализации
3. Реализация распространения запаха по ветру
4. Балансировка скорости прогрессии инфекции

## Требуемые текстуры:



### 2. Предметы
- Textures/Things/Item/BlightSlimePack
  * Текстура для пакета со слизью
  * Размер: 64x64
  * Путь: /Textures/Things/Item/BlightSlimePack.png

- Textures/Things/Item/BlightCells
  * Текстура для очищенных клеток
  * Размер: 64x64
  * Путь: /Textures/Things/Item/BlightCells.png

### 3. Сыворотки
- Textures/Things/Item/Medicine/BlightSerum_Herbal
  * Текстура для травяной сыворотки
  * Размер: 64x64
  * Путь: /Textures/Things/Item/Medicine/BlightSerum_Herbal.png

- Textures/Things/Item/Medicine/BlightSerum_Industrial
  * Текстура для промышленной сыворотки
  * Размер: 64x64
  * Путь: /Textures/Things/Item/Medicine/BlightSerum_Industrial.png

- Textures/Things/Item/Medicine/BlightSerum_Glitter
  * Текстура для продвинутой сыворотки
  * Размер: 64x64
  * Путь: /Textures/Things/Item/Medicine/BlightSerum_Glitter.png